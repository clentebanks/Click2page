<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de Landing Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="estilos.css">
  <style>
    .spinner-border-custom {
      width: 3rem;
      height: 3rem;
      border-width: 0.4em;
    }

    .hero-image {
      object-fit: cover;
      height: 50vh;
      width: 100%;
    }
        .navbar-nav .nav-link {
      transition: color 0.3s ease-in-out;
    }

    .navbar-nav .nav-link:hover {
      color: #f8f9fa;
      text-decoration: underline;
    }

  </style>
</head>
<body>
  <div class="container mt-5">
   

    <form id="landingForm">
      <h1 class="text-center">Generador de Landing Page <i class="fas fa-sync-alt reload-icon" id="reloadIcon"></i> <!-- Ícono para recargar --></h1>
      <p class="text-center">Crea tu landing page rápidamente</p>
      <div class="mb-3">
        <label for="businessName" class="form-label">Nombre del Negocio</label>
        <input type="text" class="form-control" id="businessName" required>
      </div>

      <div class="mb-3">
        <label for="pagePurpose" class="form-label">Propósito de la Página</label>
        <input type="text" class="form-control" id="pagePurpose" required>
      </div>

      <div class="mb-3">
        <label for="industry" class="form-label">Industria</label>
        <input type="text" class="form-control" id="industry" required>
      </div>

      <div class="mb-3">
        <label for="ctaText" class="form-label">Texto del Boton</label>
        <input type="text" class="form-control" id="ctaText" required>
      </div>

      <div class="mb-3">
        <label for="imageFile" class="form-label">Subir Imagen</label>
        <input type="file" class="form-control" id="imageFile" required>
      </div>
      <div class="mb-3">
        <label for="imageUpload" class="form-label">Galería de Imágenes (Seleccionar varias)</label>
        <input type="file" class="form-control" id="imageUpload" multiple accept="image/*">
      </div>
      <button type="submit" class="btn btn-primary w-100">Generar Landing Page</button>
    </form>


    <div id="landingPagePreview" class="mt-5 d-none">
      <!-- Barra de Navegación -->
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark mt-5">
        <div class="container">
          <a class="navbar-brand" href="#">Generador Landing Page</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#hero">Hero</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#about-us">Sobre Nosotros</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#features">Características</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#testimonials">Testimonios</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#cta-final">Llamada a la Acción</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- Hero Section -->
      <section id="hero" class="text-center text-white bg-primary py-5">
        <img id="previewImage" class="hero-image" alt="Imagen Hero">
        <div class="container">
          <h2 id="previewTitle"></h2>
          <p id="previewDescription"></p>
          <a href="#" id="ctaButton" class="btn btn-light btn-lg"></a>
        </div>
      </section>

      <!-- About Us Section -->
      <section id="about-us" class="py-5">
        <div class="container text-center">
          <h3>Sobre Nosotros</h3>
          <p>Somos especialistas en <span id="industryName"></span> y nuestra misión es <span id="purposeText"></span>.</p>
        </div>
      </section>

      <!-- Features Section -->
      <section id="features" class="bg-light py-5">
        <div class="container text-center">
          <h3>Características</h3>
          <div class="row">
            <div class="col-md-4">
              <h4>Característica 1</h4>
              <p>Descripción breve de la característica 1.</p>
            </div>
            <div class="col-md-4">
              <h4>Característica 2</h4>
              <p>Descripción breve de la característica 2.</p>
            </div>
            <div class="col-md-4">
              <h4>Característica 3</h4>
              <p>Descripción breve de la característica 3.</p>
            </div>
          </div>
        </div>
      </section>
      <!-- Galería de imágenes -->
      <section id="imageGallery" class="text-center py-5">
        <h3>Galería de Imágenes</h3>
        <div id="galleryContainer" class="row">
          <!-- Las imágenes de la galería aparecerán aquí -->
        </div>
      </section>


      <!-- Testimonials Section -->
      <section id="testimonials" class="py-5">
        <div class="container text-center">
          <h3>Testimonios</h3>
          <p>"Este producto ha cambiado nuestra forma de trabajar. ¡Altamente recomendado!" - Cliente Satisfecho</p>
          <p>"Una excelente solución para nuestro negocio. ¡Nos encanta!" - Cliente Feliz</p>
        </div>
      </section>

      <!-- Final Call to Action -->
      <section id="cta-final" class="text-center py-5 bg-primary text-white">
        <div class="container">
          <h3>¿Estás listo para dar el siguiente paso?</h3>
          <p>Comienza hoy y transforma tu negocio.</p>
          <a href="#" id="ctaFinalButton" class="btn btn-light btn-lg"></a>
        </div>
      </section>

      <!-- Footer -->
      <footer class="text-center py-3">
        <p>&copy; 2025 Tu Negocio. Todos los derechos reservados.</p>
      </footer>
    </div>

    <div id="buttonsArea" class="mt-4 d-none">
      <button id="publishButton" class="btn btn-primary w-100">Publicar</button>
      <button id="createSheetButton" class="btn btn-primary w-100 mt-3 d-none">Crear Google Sheet</button>
      <button id="syncSheetButton" class="btn btn-success w-100 mt-3 d-none">Sincronizar con Google Sheet</button>
      <button id="goToSheetButton" class="btn btn-warning w-100 mt-3 d-none">Ir a Google Sheet</button>
    </div>

    <div id="loadingSpinner" class="d-none text-center">
      <div class="spinner-border spinner-border-custom text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <div id="sheetLink" class="mt-5"></div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
   $(document).ready(function() {
  var heroImageBase64 = '';
  var galleryImagesBase64 = [];

  // Manejar la carga de imágenes
  $('#imageUpload').change(function(event) {
    var files = event.target.files;
    var galleryContainer = $('#galleryContainer');
    galleryContainer.empty(); // Limpiar la galería antes de cargar nuevas imágenes
    galleryImagesBase64 = []; // Limpiar el array

    // Mostrar las imágenes seleccionadas
    for (var i = 0; i < files.length; i++) {
      var file = files[i];
      var reader = new FileReader();

      reader.onload = function(e) {
        var imgElement = $('<img>', {
          src: e.target.result,
          class: 'img-thumbnail col-md-3 mb-2',
          alt: 'Imagen subida',
          style: 'max-width: 100%; height: auto;'
        });
        galleryContainer.append(imgElement);
        galleryImagesBase64.push(e.target.result); // Guardar imagen en array
      };

      reader.readAsDataURL(file);
    }
  });

  // Cuando el formulario se envía
  $('#landingForm').submit(function(event) {
    event.preventDefault();

    // Mostrar loading mientras se genera
    $('#landingPagePreview').addClass('d-none');
    $('#buttonsArea').addClass('d-none');
    $('#sheetLink').empty();
    $('#loadingSpinner').removeClass('d-none');

    // Simular pequeño delay
    setTimeout(function() {
      generarLanding();
    }, 1000); // 1 segundo de espera
  });

  function generarLanding() {
    var businessName = $('#businessName').val();
    var pagePurpose = $('#pagePurpose').val();
    var industry = $('#industry').val();
    var ctaText = $('#ctaText').val();

    // Obtener la imagen de héroe
    var imageFile = $('#imageFile')[0].files[0];
    if (imageFile) {
      var reader = new FileReader();
      reader.onload = function(e) {
        heroImageBase64 = e.target.result;

        actualizarLandingPage(businessName, industry, pagePurpose, ctaText, heroImageBase64);
      };
      reader.readAsDataURL(imageFile);
    } else {
      heroImageBase64 = '';
      actualizarLandingPage(businessName, industry, pagePurpose, ctaText, '');
    }
  }

  function actualizarLandingPage(businessName, industry, pagePurpose, ctaText, heroImageBase64) {
    var generatedTitle = "Bienvenido a " + businessName;
    var generatedDescription = "Somos especialistas en " + industry + " y nuestra misión es " + pagePurpose + ".";
    var generatedCTA = ctaText;

    $('#previewTitle').text(generatedTitle);
    $('#previewDescription').text(generatedDescription);
    $('#ctaButton').text(generatedCTA);
    $('#previewImage').attr('src', heroImageBase64);
    $('#ctaFinalButton').text(generatedCTA);

    $('#industryName').text(industry);
    $('#purposeText').text(pagePurpose);

    $('#loadingSpinner').addClass('d-none');
    $('#landingPagePreview').removeClass('d-none');
    $('#buttonsArea').removeClass('d-none');
  }

  // Cuando hace clic en "Publicar"
  $(document).on('click', '#publishButton', function() {
    $('#landingForm').addClass('d-none');
    $('#buttonsArea').addClass('d-none');
    $('#landingPagePreview').removeClass('d-none');
    $('#buttonsArea').removeClass('d-none');
    $('#createSheetButton').removeClass('d-none');
    $('#publishButton').addClass('d-none');
  });

  // Crear Google Sheet
  $(document).on('click', '#createSheetButton', function() {
    $('#createSheetButton').prop('disabled', true);
    $('#createSheetButton').addClass('d-none');

    var businessName = $('#businessName').val();
    var pagePurpose = $('#pagePurpose').val();
    var industry = $('#industry').val();
    var ctaText = $('#ctaText').val();

    $('#sheetLink').empty();
    $('#loadingSpinner').removeClass('d-none');

    $.post('https://script.google.com/macros/s/AKfycbzzrstWsSckWaH9-RDCfYoD1nS9-POdQFUR6meGcJit63QFjATdEiZnYlmSu2-b8GRX/exec', {
      businessName: businessName,
      pagePurpose: pagePurpose,
      industry: industry,
      ctaText: ctaText,
      heroImage: heroImageBase64,
      galleryImages: JSON.stringify(galleryImagesBase64)
    }, function(response) {
      var data = response;

      if (data.sheetUrl) {
        $('#sheetLink').html(`
          <p class="text-success fw-bold">✅ ¡Google Sheet creada exitosamente!</p>
          <button class="btn btn-success w-100 mt-3" id="syncSheetButton">Sincronizar con Google Sheet</button>
          <button class="btn btn-warning w-100 mt-3" id="goToSheetButton" data-sheet-url="${data.sheetUrl}">Ir a Google Sheet</button>
        `);
      } else {
        $('#sheetLink').html('<p class="text-danger fw-bold">❌ Hubo un problema creando la Google Sheet. Intenta nuevamente.</p>');
      }

      $('#loadingSpinner').addClass('d-none');
      $('#createSheetButton').prop('disabled', false);
    });
  });

  // Sincronizar con Google Sheet
  $(document).on('click', '#syncSheetButton', function() {
    $('#loadingSpinner').removeClass('d-none');
    setTimeout(function() {
      $('#loadingSpinner').addClass('d-none');
      alert('¡Sincronización exitosa con Google Sheets!');
    }, 2000);
  });

  // Ir a Google Sheet
  $(document).on('click', '#goToSheetButton', function() {
    window.open($(this).data('sheet-url'), '_blank');
  });
});

  </script>
</body>
</html>
